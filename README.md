# TODOLIST 

#### Приложение для постановки и работы с целями, отслеживания прогресса по целям.

#### Стек: python3.10, Django, PostgreSQL. 
***
#### Описание проекта

В проекте используется Poetry. Файлы poetry.lock, pyproject.toml показывают информацию по зависимостям 
и установленным пакетам. 

Информация по запуску базы данных PostgreSQL указана в docker-compose файле.
Информация по конфигурации приложения Todolist и значениям для переменных окружения указана в файле .env.
Данные в БД сохраняются с помощью volumes в docker-compose файле. 

Создана кастомная модель пользователя (наследник от AbstractUser) в приложении Core. Можно создать 
пользователя с помощью команды `createsuperuser`. Управление пользователями осуществляется из Django admin. 

Миграции для создания моделей запускаются из корневой директории в терминале командой
`python manage.py makemigrations`

Миграции накатываются в модели командой `python manage.py migrate`

Проект запускается через `runserver` (файл manage.py в корневой директории проекта). 
 
Папка Deploy в корне проекта включает docker-compose файл, файл .env, nginx.conf для автоматической сборки и деплоя
приложения на сервер с помощью GitHub Actions. Все чувствительные данные (логины/пароли и т.п.) указаны через 
переменные окружения, которые зашифрованы с помощью библиотеки `ansible-vault-win` в файле .env внутри папки Deploy; настоящие 
значения хранятся в secrets в GitHub.

Виртуальная машина работает по адресу домена: `ybobir.ga`, либо по публ IPv4: 158.160.60.182. 

Для написания API использовалась Django REST Framework (DRF). Реализована регистрация пользователя с последующей 
аутентификацией. Аутентификация пользователя и вход в приложение осуществляется по логину и паролю зарегистрированного 
пользователя, либо через социальную сеть VK с помощью протокола OAuth2 и библиотеки `social-auth-app-django`.

Библиотека `django.contrib.auth` позволяет проводить аутентификацию пользователя с помощью механизма
`django.contrib.auth.authenticate` и, в случае корректного username и password, запоминать пользователя с помощью
`django.contrib.auth.login`. Logout пользователя реализован с помощью HTTP метода DELETE, который удаляет
информацию о текущей сессии пользователя: таким образом, пользователь выходит из текущего аккаунта, но его данные 
остаются в БД. 

Реализована возможность сменить пароль путем ввода старого и нового значений пароля пользователем. Пароли 
пользователей в БД хранятся в зашифрованном виде.

Графический интерфейс работы с целями представляет собой набор из нескольких досок, при этом, каждая из досок может
включать список целей в назначенной категории и комментариев к каждой цели, созданных пользователями. 
Доска разделена на три колонки со статусами К выполнению, В работе, Выполнено. В приложении goals реализованы 
функции сортировки, фильтрации и поиска с помощью `django-filter`. 

Удаленные цели или категории получают статус В архиве и не показываются пользователю, однако не удаляются из БД. 
Комментарии пользователей удаляются полностью. 

Дополнительная информация по моделям, сериализаторам, вьюшкам и url-адресам указана в файлах внутри приложений 
`core` (информация по пользователю)и `goals` (информация по целям). Для приложений core и goals реализована админка с 
возможностью работать со всеми созданными сущностями. 

Работа с доступами в DRF осуществляется с помощью системы permissions. На предварительном этапе пользователь имеет
возможность работать только с теми сущностями, которые он создал сам. 
